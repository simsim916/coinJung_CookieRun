'use strict';

let notiboardAR = [
    {
        notice_subject : '알려진 이슈를 알려드립니다.',
        notice_date : '2023.11.16'
    },
    {
        notice_subject : '11월 업데이트 소식.',
        notice_date : '2023.11.16'
    }
];

let freeboardAR = [
    {
        subject : '아오 밸런드 패치 언제함?',
        userInfo : '금광동 쏘스윗',
        heart : 3,
        read : 57,
        commentNum : 2,
        alticle : 
`게임하다 갑자기 화가 치밀올라서 글써봄



업데이트 도데체 언제함??`,
        freeboard_date : '1시간 전',
        comment_user_info : ['[슈비버거조하]', '[내여친존예]'],
        content : [
            '킹덤아레나 노잼; 업데이트좀',
            '솔직히 마틀렌 너무 사기야',
        ]
    },

    {
        subject : '쿠키런 풀스펙 구매합니다..!',
        userInfo : '그린탑코인정',
        heart : 62,
        read : 81,
        commentNum : 2,
        alticle : 
`구글계정(구깡) 내보내기 안한계정만 구매 희망해요~

캐릭 펫 마탕 당연히 만렙이어야 하구여
                   
스킨은 전부다 보유할필요한없지만 풀스펙계정답게
                   
많이보유했으면 하구요
                   
키티 미미같은 쿠키는 없어도 됩니다 ㅎㅎ`,
        freeboard_date : '3시간 전',
        comment_user_info : ['[섹시소녀네티]', '[깜구클럽]'],
        content : [
            '메일보냈어요',
            '여기 이런거 올려도됨?',
        ]
    },


    {
        subject : '두둠칫 둠칫 친추 ㄱ',
        userInfo : '두둠칫 둠칫',
        heart : 74,
        read : 231,
        commentNum : 2,
        alticle : 
`길드원 구함
마를렌서버 두둠칫 둠칫 친추 ㄱㄱ`,
        freeboard_date : '5시간 전',
        comment_user_info : ['[창민이형파이팅]', '[★문석짱★]'],
        content : [
            '마를렌 누가함;;',
            '킹덤전 열수있음?',
        ]
    },

    {
        subject : '결정석너프하면접을거임',
        userInfo : '봉삼이',
        heart : 333,
        read : 571,
        commentNum : 1,
        alticle : 
`너프하지마라진짜

`,
        freeboard_date : '10시간 전',
        comment_user_info : ['[지현누나힘내요]'],
        content : [
            '접지마여 할만한데',
        ]
    },

    {
        subject : '솔직히 자바스크립트 개어려움',
        userInfo : '그린실버타운',
        heart : 32,
        read : 5723,
        commentNum : 5,
        alticle : 
`CSS도 안익숙한데 자바스크립트 언제 할수있을까
님들은 ㅓㅇ떰
`,
        freeboard_date : '1시간 전',
        comment_user_info : ['[창민이형파이팅]', '[★문석짱★]' ,'[봉삼이]','[민쥐]', '[지현누나힘내요]', '[에이스수미]'],
        content : [
            'ㅇㅈ',
            '할만하던데',
            '와인정',
            'ㅇㅇ; 진도 너무빠름',
            '나 오늘 그만둘뻔;;',
            'ㅇㅇ 할만함 ㅎㅎ',
        ]
    },

    {
        subject : '스토브 인증기 왜이럼?',
        userInfo : '그래도이쁨',
        heart : 10,
        read : 57,
        freeboard_date : '12시간 전',
        commentNum : 65
    },
    {
        subject : '스토브 인증기 왜이럼?',
        userInfo : '그래도이쁨',
        heart : 40,
        read : 57,
        freeboard_date : '12시간 전',
        commentNum : 65
    },
    {
        subject : '스토브 인증기 왜이럼?',
        userInfo : '그래도이쁨',
        heart : 34,
        read : 57,
        freeboard_date : '12시간 전',
        commentNum : 65
    },
    {
        subject : '스토브 인증기 왜이럼?',
        userInfo : '그래도이쁨',
        heart : 43,
        read : 57,
        freeboard_date : '12시간 전',
        commentNum : 65
    },
    {
        subject : '스토브 인증기 왜이럼?',
        userInfo : '그래도이쁨',
        heart : 123,
        read : 57,
        freeboard_date : '12시간 전',
        commentNum : 65
    },
    {
        subject : '스토브 인증기 왜이럼?',
        userInfo : '그래도이쁨',
        heart : 43,
        read : 57,
        freeboard_date : '12시간 전',
        commentNum : 65
    },
    {
        subject : '스토브 인증기 왜이럼?',
        userInfo : '그래도이쁨',
        heart : 13,
        read : 57,
        freeboard_date : '12시간 전',
        commentNum : 65
    },
    {
        subject : '스토브 인증기 왜이럼?',
        userInfo : '그래도이쁨',
        heart : 43,
        read : 57,
        freeboard_date : '12시간 전',
        commentNum : 65
    },
    {
        subject : '스토브 인증기 왜이럼?',
        userInfo : '그래도이쁨',
        heart : 12,
        read : 57,
        freeboard_date : '12시간 전',
        commentNum : 65
    },
    {
        subject : '스토브 인증기 왜이럼?',
        userInfo : '그래도이쁨',
        heart : 12,
        read : 57,
        freeboard_date : '12시간 전',
        commentNum : 65
    },
    {
        subject : '스토브 인증기 왜이럼?',
        userInfo : '그래도이쁨',
        heart : 12,
        read : 57,
        freeboard_date : '12시간 전',
        commentNum : 65
    },
    {
        subject : '스토브 인증기 왜이럼?',
        userInfo : '그래도이쁨',
        heart : 12,
        read : 57,
        freeboard_date : '12시간 전',
        commentNum : 65
    },
    {
        subject : '스토브 인증기 왜이럼?',
        userInfo : '그래도이쁨',
        heart : 12,
        read : 57,
        freeboard_date : '12시간 전',
        commentNum : 65
    },
    {
        subject : '스토브 인증기 왜이럼?',
        userInfo : '그래도이쁨',
        heart : 12,
        read : 57,
        freeboard_date : '12시간 전',
        commentNum : 65
    },
    {
        subject : '스토브 인증기 왜이럼?',
        userInfo : '그래도이쁨',
        heart : 12,
        read : 57,
        freeboard_date : '12시간 전',
        commentNum : 65
    },
    {
        subject : '스토브 인증기 왜이럼?',
        userInfo : '그래도이쁨',
        heart : 12,
        read : 57,
        freeboard_date : '12시간 전',
        commentNum : 65
    },
    {
        subject : '스토브 인증기 왜이럼?',
        userInfo : '그래도이쁨',
        heart : 12,
        read : 57,
        freeboard_date : '12시간 전',
        commentNum : 65
    },
    {
        subject : '스토브 인증기 왜이럼?',
        userInfo : '그래도이쁨',
        heart : 12,
        read : 57,
        freeboard_date : '12시간 전',
        commentNum : 65
    },
    {
        subject : '스토브 인증기 왜이럼?',
        userInfo : '그래도이쁨',
        heart : 12,
        read : 57,
        freeboard_date : '12시간 전',
        commentNum : 65
    },
    {
        subject : '스토브 인증기 왜이럼?',
        userInfo : '그래도이쁨',
        heart : 12,
        read : 57,
        freeboard_date : '12시간 전',
        commentNum : 65
    },
    {
        subject : '스토브 인증기 왜이럼?',
        userInfo : '그래도이쁨',
        heart : 12,
        read : 57,
        freeboard_date : '12시간 전',
        commentNum : 65
    },
    {
        subject : '스토브 인증기 왜이럼?',
        userInfo : '그래도이쁨',
        heart : 12,
        read : 57,
        freeboard_date : '12시간 전',
        commentNum : 65
    },
    {
        subject : '스토브 인증기 왜이럼?',
        userInfo : '그래도이쁨',
        heart : 12,
        read : 57,
        freeboard_date : '12시간 전',
        commentNum : 65
    },
    {
        subject : '스토브 인증기 왜이럼?',
        userInfo : '그래도이쁨',
        heart : 12,
        read : 57,
        freeboard_date : '12시간 전',
        commentNum : 65
    },
    {
        subject : '스토브 인증기 왜이럼?',
        userInfo : '그래도이쁨',
        heart : 12,
        read : 57,
        freeboard_date : '12시간 전',
        commentNum : 65
    },
    {
        subject : '스토브 인증기 왜이럼?',
        userInfo : '그래도이쁨',
        heart : 12,
        read : 57,
        freeboard_date : '12시간 전',
        commentNum : 65
    },
    {
        subject : '스토브 인증기 왜이럼?',
        userInfo : '그래도이쁨',
        heart : 12,
        read : 57,
        freeboard_date : '12시간 전',
        commentNum : 65
    },
    {
        subject : '스토브 인증기 왜이럼?',
        userInfo : '그래도이쁨',
        heart : 12,
        read : 57,
        freeboard_date : '12시간 전',
        commentNum : 65
    },
];

let main = document.getElementsByTagName('main'),

/*notice 부분 선언*/
noSubject = main[0].querySelectorAll('.notice_subject'),
noDate = main[0].querySelectorAll('.notice_date'),
list_notice = main[0].querySelectorAll('.list_notice'),

/*리뷰순 좋아요순 선언*/
list_sort = main[0].querySelectorAll('.list_sort'),

/* HTML 태그를 반복문을 통한 생성 관련 선언 */
content = main[0].querySelector('.content'),
free_content = main[0].querySelector('.free_content');






    /** 공지부분 태그, 내용 채우기 반복문  **/
    {
        let noticeHTML = '';
        for (let i = 0; i < notiboardAR.length; i++) {
            noticeHTML += `
                <a href="#" class="list_notice">
                    <div class="notice_header">
                        <span class="notice"></span>
                    </div>
                    <div class="notice_subject">${notiboardAR[i].notice_subject}</div>
                    <div class="notice_date">${notiboardAR[i].notice_date}</div>
                </a>
            `;
        }
        content.children[0].innerHTML = noticeHTML;
    }


    /* ====================================== */
    /** content 부분 태그, 내용 채우기 반복문 **/

    function array(sort){
  

        let contentHTML = '';
        for(let i = 0 ; i < sort ; i++){
                contentHTML += `
                <a href="#" class="list_freeboard">
                    <div class="freeboard_subject">${freeboardAR[i].subject}</div>
                    <div class="userInfo">${freeboardAR[i].userInfo}</div>
                    <div class="heart">${freeboardAR[i].heart}</div>
                    <div class="read">${freeboardAR[i].read}</div>
                    <div class="freeboard_date">${freeboardAR[i].commentNum}</div> 
                </a>
            `;
        }
        free_content.innerHTML = contentHTML;
    }

    let sort = document.getElementById('sort');
    sort.addEventListener('change', (event) =>{
        let selcet_option = event.target.value;
        console.log(selcet_option);
        if(selcet_option == 10) array(selcet_option)
        else if(selcet_option == 20) array(selcet_option)
        else if(selcet_option == 30) array(selcet_option)
    })
    array(10);


    /* ====================================== */
    /** 리뷰순 좋아요순 **/
    {
        let list_freeboard = main[0].querySelectorAll('.list_freeboard');
        function read_turn(){
            for(let i=0, temp; i<list_freeboard.length-1 ; i++){
                for(let j = i+1 ; j<list_freeboard.length ; j++){
                    if(freeboardAR[i].read < freeboardAR[j].read){
                        temp = freeboardAR[i];
                        freeboardAR[i] = freeboardAR[j];
                        freeboardAR[j] = temp;
                    }
                }
            }
        
        }
        function heart_turn(){
            for(let i=0, temp; i<list_freeboard.length-1 ; i++){
                for(let j = i+1 ; j<list_freeboard.length ; j++){
                    if(freeboardAR[i].heart < freeboardAR[j].heart){
                        temp = freeboardAR[i];
                        freeboardAR[i] = freeboardAR[j];
                        freeboardAR[j] = temp;
                    }
                }
            }
        }
        
        list_sort[0].children[0].addEventListener('click', (event) =>{
            let turn = event.target;
            list_sort[0].children[0].style.opacity = 1;
            list_sort[0].children[1].style.opacity = 0.5;
            if(turn.innerText == "리뷰순"){
                read_turn();
                for (let i = 0; i < list_freeboard.length; i++) {
                    list_freeboard[i].children[0].innerText = `${freeboardAR[i].subject}`;
                    list_freeboard[i].children[1].innerText = `${freeboardAR[i].userInfo}`;
                    list_freeboard[i].children[2].innerText = `${freeboardAR[i].heart}`;
                    list_freeboard[i].children[3].innerText = `${freeboardAR[i].read}`;
                    list_freeboard[i].children[4].innerText = `${freeboardAR[i].commentNum}`;
                }
            }
        })
        
        list_sort[0].children[1].addEventListener('click', (event) =>{
            let turn = event.target;
            list_sort[0].children[0].style.opacity = 0.5;
            list_sort[0].children[1].style.opacity = 1;
            if(turn.innerText == "좋아요순"){
                heart_turn();
                for (let i = 0; i < list_freeboard.length; i++) {
                    list_freeboard[i].children[0].innerText = `${freeboardAR[i].subject}`;
                    list_freeboard[i].children[1].innerText = `${freeboardAR[i].userInfo}`;
                    list_freeboard[i].children[2].innerText = `${freeboardAR[i].heart}`;
                    list_freeboard[i].children[3].innerText = `${freeboardAR[i].read}`;
                    list_freeboard[i].children[4].innerText = `${freeboardAR[i].commentNum}`;
                }
        }
        })
    }

    /* ====================================== */
    /** inner HTML 게시판 상호작용 **/
    {
        /* HTML 삭제 후 alticle 삽입 */
        function insert_alticle(){
            main[0].innerHTML = "";
    
            main[0].innerHTML = main[0].innerHTML + `
            <div class="notice_option">
            <h2>자유 게시판</h2>
            <a href ="./01_cookie_freeboard.html" class="back_list">목록가기</a>
        </div>
        
        <section class = "data">
            <div class = "title">
                <p></p>
                <div class = "user_name"></div>
                <div class = "alticle_date"></div>
            </div>
            <div class="alticle">
                <pre></pre>
            </div>
            <div class="alticle_like">
                <button type="button"></button>
            </div>
            <div class = "comment">
                <h3>댓글</h3>
                <div class="comment_logout">
                    <p>로그인 후 댓글을 남길 수 있습니다.</p>
                    <button>로그인</button>
                </div>
                <div class="comment_list">
                    <ul>
                        <li>
                            <img src="https://imagedelivery.net/57rIj2o4cJ62boUSs_DLpA/a5bae60f-65cb-472b-09ba-4b2f62199700/format=webp" alt="">
                           <button type="button"></button>
                           <p></p> 
                        </li>
                        <li class="test">
                            <img src="https://imagedelivery.net/57rIj2o4cJ62boUSs_DLpA/c27781aa-4293-49cf-e523-c2f63499d700/format=webp" alt="">
                           <button type="button"></button>
                           <p></p> 
                        </li>
                        
                    </ul>
                </div>
            </div>
        </section>
        
        <section class = "info">
            <div class="user_icon">
                <div class="user_thumb">
                    <button type="button"><img src="https://imagedelivery.net/57rIj2o4cJ62boUSs_DLpA/5f4cbe1f-a8cd-417e-fe54-5ca34620da00/format=webp" alt=""></button>  
                </div>
                <div class="user_info"></div>
                <div class="user_link">
                  <button type="button">쿠키 배합실</button>
                  <button type="button">쿠키 플레이스</button>
                </div>
            </div>
            <div class="comment_num">
              <span>댓글</span>
              <span></span>
            </div>
            <div class="like_num">
              <span>좋아요</span>
              <span></span>
            </div>
            <div class="read_num">
              <span>조회수</span>
              <span></span>
            </div>
            <div class="share">
              <span>공유</span>
              <span></span>
            </div>
        </section>
            
            `;
        }
    
        /* 해당 alticle 정보 삽입 */
        function alticle_js(index){
            let title = document.getElementsByClassName('title');
            let alticle = document.getElementsByClassName('alticle');
            let alticle_like = document.getElementsByClassName('alticle_like');
            let comment_list = document.getElementsByClassName('comment_list');
            let user_icon = document.getElementsByClassName('user_icon');
            let info = document.getElementsByClassName('info');
    
            title[0].children[0].innerText = `${freeboardAR[index].subject}`;
            title[0].children[1].innerText = `${freeboardAR[index].userInfo}`;
            title[0].children[2].innerText = `${freeboardAR[index].freeboard_date}`;
        
            alticle[0].children[0].innerText = `${freeboardAR[index].alticle}`;
        
            alticle_like[0].children[0].innerText = `${freeboardAR[index].heart}`;
        
            for(let i = 0 ; i < freeboardAR[index].content.length ; i++){
                comment_list[0].childNodes[1].childNodes[i * 2 + 1].children[1].innerText = `${freeboardAR[index].comment_user_info[i]}`;
                comment_list[0].childNodes[1].childNodes[i * 2 + 1].children[2].innerText = `${freeboardAR[index].content[i]}`;
            }
            user_icon[0].childNodes[3].innerText = `${freeboardAR[index].userInfo}`;
        
            info[0].children[1].children[1].innerText = `${freeboardAR[index].commentNum}`;
            info[0].children[2].children[1].innerText = `${freeboardAR[index].heart}`;
            info[0].children[3].children[1].innerText = `${freeboardAR[index].read}`;
        }
    
    
        /* "클릭"이 감지 됐을 때 inner HTML 게시판 상호작용 실행 */
        let list_freeboard = main[0].querySelectorAll('.list_freeboard');

        for(let i = 0 ; i < list_freeboard.length ; i++){
            list_freeboard[i].addEventListener('click', (event) => {
                let turn = event.target,
                data = turn.innerText;
    
                let index = freeboardAR.findIndex(item => item.subject === data);
            
    
                insert_alticle();       // 기존 HTML 삭제 / alticle 양식 추가
                alticle_js(index);      // alticle 내용 추가
            })
        }
    
    }

    /* ====================================== */

    /**  page 생성, page 넘김 **/
    let page = main[0].getElementsByClassName('page');
    let selcet_option = sort.value;
    let page_num = Math.round(freeboardAR.length/selcet_option);        // 구글링 -> round 반올림

    /* page 데이터 수 만큼 생성 */
    for(let i = 0 ; i < page_num ; i++){

        if(i == 0 ){
            page[0].innerHTML += `
                 <a href="#" class="default">${i+1}</a>
            `
        }
        else{
            page[0].innerHTML += `
                 <a href="#" class="">${i+1}</a>
            `
        }
    }







    // let pageBoxes = document.querySelectorAll('.page');

    // pageBoxes.forEach((pageBox, index) => {
    //     pageBox.addEventListener('click', (event) => {
    //         let turn = event.target;
    //         for (let i = 0; i < pageBoxes.length; i++) {
    //             if (pageBoxes[i] === turn) {
    //                 // 클릭한 페이지 박스의 색상 변경
    //                 turn.style.backgroundColor = "black";
    //                 turn.style.color = "white";
    //             } else {
    //                 // 나머지 페이지 박스의 색상 초기화
    //                 pageBoxes[i].style.backgroundColor = "white";
    //                 pageBoxes[i].style.color = "black";
    //             }
    //         }
    //     });
    // }); ㅡㅡ





    /* ====================================== */
    /** a태그 링크 기능 삭제 부분 **/

    let preventLink = document.querySelectorAll('a');
    
    preventLink.forEach(function (link) {                   // 구글링해서 사용했음 -> forEach: 지금은 위에서 preventLink를 선언해서 'a'태그를 다 찾아서 배열의 형태로 저장했고 
        link.addEventListener('click', function (event) {
            event.preventDefault();                         //  forEach 를 사용해서 link 기능을 클릭했을 시 작동되지 않도록 막음(preventDefault)
        });
    });    

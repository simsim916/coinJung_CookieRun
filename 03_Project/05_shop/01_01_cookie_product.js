'use strict';

const productAR = [
    {
        update:'2023-11-20',
        title: '[쿠키런스토어]쿠키런 스키릇팩 피규어',
        intro: '** 1차 수량 품절로, 재입고 예정입니다. 재입고 예정일 : 11/17(금) ~ 20(월)',
        price: '5,000',
        img: [
            'https://shop-phinf.pstatic.net/20231114_202/1699953403443Iz8WI_JPEG/52025790832298130_1281338351.jpg?type=m510',
            'https://shop-phinf.pstatic.net/20231114_110/1699953409184PThGI_JPEG/10886639949869620_312616009.jpg?type=m510',
            'https://shop-phinf.pstatic.net/20231114_70/1699953413567rf7dx_JPEG/12503080342079771_653990839.jpg?type=m510'
        ],
        views: 0,
        sell : 0,
        stock: 10,
        textreview: 1,
        photoreview: 0,
    },
    {
        update: '2023-11-20',
        title: '[쿠키런스토어]쿠키런 랜덤 키체인',
        intro: '** 1차 수량 품절로, 재입고 예정입니다. 재입고 예정일 : 11/17(금) ~ 20(월)',
        price: 5000,
        img: [
            'https://shop-phinf.pstatic.net/20231114_258/1699952949584oLc3t_JPEG/12502616375115323_1205563992.jpg?type=o1000',
            'https://shop-phinf.pstatic.net/20231114_239/1699953157715MKUUp_PNG/12502824501346304_791880017.png?type=m510',
            'https://shop-phinf.pstatic.net/20231114_124/1699952960161AhGyC_PNG/52025347519581164_186066631.png?type=m510',
        ],
        views: 0,
        sell : 0,
        stock: 10,
        textreview: 1,
        photoreview: 0,
        contents: [
            'https://shop-phinf.pstatic.net/20231114_251/1699953446820NRf3n_PNG/%EC%BF%A0%ED%82%A4%EB%9F%B0_%ED%94%BC%EA%B7%9C%EC%96%B4_%EC%8B%9C%ED%81%AC%EB%A6%BF%ED%8C%A9_%EC%83%81%EC%84%B8%ED%8E%98%EC%9D%B4%EC%A7%80.png?type=w860'
        ],
        userphoto: [
            'https://phinf.pstatic.net/checkout.phinf/20231121_58/1700561778020X87SD_JPEG/IMG_1901.jpeg?type=f300_300',
            'https://phinf.pstatic.net/checkout.phinf/20231124_188/1700790087691pA1W4_JPEG/1700790051451.jpg?type=f300_300',
            'https://phinf.pstatic.net/checkout.phinf/20231124_92/1700817650464iF3ai_JPEG/6D23B991-E45B-4420-BEC4-1A048EE3EFAD.jpeg?type=f300_300',
        ]
    },
    {
        update: '2023-11-20',
        title: '[러블리 인형공방X메리베어 장난감가게]곰젤리 솜인형 분홍곰&노란곰 (예약구매)',
        intro: '※구매 전 주의사항💖 기존 러블리 인형공방 곰젤리 솜인형은 신규 출시된 곰젤리 솜인형 분홍곰과 동일한 사이즈입니다.',
        price: 33900,
        img: [
            'https://shop-phinf.pstatic.net/20231107_123/1699332251801gjxdW_JPEG/2889125558569288_1157254165.jpg?type=m510',
            'https://shop-phinf.pstatic.net/20231107_213/1699332318038Oxyfx_JPEG/21061882862541920_1286727552.jpg?type=m510',
            'https://shop-phinf.pstatic.net/20231107_249/1699332283919gEG1R_JPEG/5049165717078541_2138465965.jpg?type=m510',
        ],
        views: 0,
        sell : 0,
        stock: 10,
        textreview: 1,
        photoreview: 0,
        contents: [
            'https://shop-phinf.pstatic.net/20231114_251/1699953446820NRf3n_PNG/%EC%BF%A0%ED%82%A4%EB%9F%B0_%ED%94%BC%EA%B7%9C%EC%96%B4_%EC%8B%9C%ED%81%AC%EB%A6%BF%ED%8C%A9_%EC%83%81%EC%84%B8%ED%8E%98%EC%9D%B4%EC%A7%80.png?type=w860'
        ],
        userphoto: [
            'https://phinf.pstatic.net/checkout.phinf/20231121_58/1700561778020X87SD_JPEG/IMG_1901.jpeg?type=f300_300',
            'https://phinf.pstatic.net/checkout.phinf/20231124_188/1700790087691pA1W4_JPEG/1700790051451.jpg?type=f300_300',
            'https://phinf.pstatic.net/checkout.phinf/20231124_92/1700817650464iF3ai_JPEG/6D23B991-E45B-4420-BEC4-1A048EE3EFAD.jpeg?type=f300_300',
        ],
    },
    {
        update: '2023-11-20',
        title: '[쿠키런스토어]브레이브 어드벤쳐 용감한쿠키',
        intro: '모험을 떠나는 용감한 쿠키가 귀여운 인형 키링으로!',
        price: 20000,
        img: [
            'https://shop-phinf.pstatic.net/20230712_149/1689141723147orsKB_JPEG/3343809127994028_1734275766.jpg?type=m510',
            'https://shop-phinf.pstatic.net/20230712_127/1689141731171yd5hn_JPEG/2472532521839555_309567386.jpg?type=m510',
            'https://shop-phinf.pstatic.net/20230712_86/1689141740472nE1ue_JPEG/2472541823698659_1014661318.jpg?type=m510',
            'https://shop-phinf.pstatic.net/20230712_86/1689141740472nE1ue_JPEG/2472541823698659_1014661318.jpg?type=m510',
            'https://shop-phinf.pstatic.net/20230712_86/1689141740472nE1ue_JPEG/2472541823698659_1014661318.jpg?type=m510',
        ],
        views: 0,
        sell : 0,
        stock: 10,
        textreview: 1,
        photoreview: 1,
        contents: [
            'https://shop-phinf.pstatic.net/20231114_251/1699953446820NRf3n_PNG/%EC%BF%A0%ED%82%A4%EB%9F%B0_%ED%94%BC%EA%B7%9C%EC%96%B4_%EC%8B%9C%ED%81%AC%EB%A6%BF%ED%8C%A9_%EC%83%81%EC%84%B8%ED%8E%98%EC%9D%B4%EC%A7%80.png?type=w860'
        ],
        userphoto: [
            'https://phinf.pstatic.net/checkout.phinf/20231121_58/1700561778020X87SD_JPEG/IMG_1901.jpeg?type=f300_300',
            'https://phinf.pstatic.net/checkout.phinf/20231124_188/1700790087691pA1W4_JPEG/1700790051451.jpg?type=f300_300',
            'https://phinf.pstatic.net/checkout.phinf/20231124_92/1700817650464iF3ai_JPEG/6D23B991-E45B-4420-BEC4-1A048EE3EFAD.jpeg?type=f300_300',
        ],
    },
    {
        update: '2023-11-20',
        title: '[쿠키런스토어]용과 드래곤 솜인형',
        intro: '[ 용과 드래곤 솜인형 정식 출시! ] 예약구매 종료 후 많은 분들이 재입고 문의러블리 인형공방에서 생산된 귀여운 매력의 용과 드래곤 솜인형을 실물로 만나보세요 💖',
        price: 25500,
        img: [
            'https://shop-phinf.pstatic.net/20230517_44/1684285908800m8pmy_JPEG/37653453786116170_2131712759.jpg?type=m510',
            'https://shop-phinf.pstatic.net/20230517_253/1684285934380zHmLR_JPEG/1328414787855998_52302134.jpg?type=m10000_10000_no_rotate',
            'https://shop-phinf.pstatic.net/20230517_177/16842859454345tSW5_JPEG/1957429866527695_2095394078.jpg?type=m510',
        ],
        views: 0,
        sell : 0,
        stock: 10,
        textreview: 1,
        photoreview: 0,
        contents: [
            'https://shop-phinf.pstatic.net/20231114_251/1699953446820NRf3n_PNG/%EC%BF%A0%ED%82%A4%EB%9F%B0_%ED%94%BC%EA%B7%9C%EC%96%B4_%EC%8B%9C%ED%81%AC%EB%A6%BF%ED%8C%A9_%EC%83%81%EC%84%B8%ED%8E%98%EC%9D%B4%EC%A7%80.png?type=w860'
        ],
        userphoto: [
            'https://phinf.pstatic.net/checkout.phinf/20231121_58/1700561778020X87SD_JPEG/IMG_1901.jpeg?type=f300_300',
            'https://phinf.pstatic.net/checkout.phinf/20231124_188/1700790087691pA1W4_JPEG/1700790051451.jpg?type=f300_300',
            'https://phinf.pstatic.net/checkout.phinf/20231124_92/1700817650464iF3ai_JPEG/6D23B991-E45B-4420-BEC4-1A048EE3EFAD.jpeg?type=f300_300',
        ],
    },
    {
        update: '2023-11-20',
        title: '[쿠키런스토어]생일케이크맛 쿠키 멜로디 인형',
        intro: '',
        price: 28900,
        img: [
            'https://shop-phinf.pstatic.net/20230530_41/168541639577879P8x_PNG/331284706142756_1175157606.png?type=m510',
            'https://shop-phinf.pstatic.net/20230530_202/1685416401019ni7bi_PNG/34294242827817026_188283953.png?type=m510',
            'https://shop-phinf.pstatic.net/20230530_147/1685416406452XeL6u_PNG/932495258998725_283619380.png?type=m510',
        ],
        views: 0,
        sell : 0,
        stock: 10,
        textreview: 1,
        photoreview: 0,
        contents: [
            'https://shop-phinf.pstatic.net/20231114_251/1699953446820NRf3n_PNG/%EC%BF%A0%ED%82%A4%EB%9F%B0_%ED%94%BC%EA%B7%9C%EC%96%B4_%EC%8B%9C%ED%81%AC%EB%A6%BF%ED%8C%A9_%EC%83%81%EC%84%B8%ED%8E%98%EC%9D%B4%EC%A7%80.png?type=w860'
        ],
        userphoto: [
            'https://phinf.pstatic.net/checkout.phinf/20231121_58/1700561778020X87SD_JPEG/IMG_1901.jpeg?type=f300_300',
            'https://phinf.pstatic.net/checkout.phinf/20231124_188/1700790087691pA1W4_JPEG/1700790051451.jpg?type=f300_300',
            'https://phinf.pstatic.net/checkout.phinf/20231124_92/1700817650464iF3ai_JPEG/6D23B991-E45B-4420-BEC4-1A048EE3EFAD.jpeg?type=f300_300',
        ],
    },
];
let itemNum = 1;

let itemRightBox = document.getElementsByClassName('item_rightbox_info')
let itemImg = document.getElementsByClassName('item_img');
let itemImgBtn = document.getElementsByClassName('item_imgBtn');
let basic = document.getElementById('basic');
let bestitem = document.getElementsByClassName('best_items');
let maxpoint = document.getElementById('maxpoint');
let textpoint, photopoint;
let pointDetails = document.getElementById('pointDetails');
let cardDetails = document.getElementById('cardDetails');
let quantityBox = document.getElementsByClassName('item_rightbox_point_quantity');
let itemBox = document.getElementsByClassName('item');
            

// 함수 종류 (스크롤, 판매높은순 정렬)
function pageUp(){
    window.scrollTo(0,300);
}
function productARSellDown() {
    for (let i = 0 , t; i < productAR.length-1; i++){
        for (let j = i+1 ; j < productAR.length ; j++) {
            if ( productAR[i].sell < productAR[j].sell){
                t = productAR[i];
                productAR[i] = productAR[j];
                productAR[j] = t;
                
            }
        }
    }
}
 // 포인트 점수 구하기 식
if(productAR[itemNum].textreview == 1) {
    textpoint= 50;
} else {
    textpoint= 0;
}

if(productAR[itemNum].textreview == 1) {
    photopoint= 100;
} else {
    photopoint= 0;
}
/* ==========================================================================*/
writePage();
//게시글 작성
function writePage(){
    itemBox[0].innerHTML=`
    <div class="item_leftbox">
                <div class="item_img"></div>
                <div class="item_imgBtn"></div>
            </div>
            <div class="item_rightbox">
                <div class="item_rightbox_info">
                    <div>${productAR[itemNum].title}</div>
                    <div>${productAR[itemNum].price.toLocaleString()} 원</div>
                </div>
                <div class="item_rightbox_point">
                    <div class="item_rightbox_point_title">
                        <span>쿠키런 스토어 고객을 위한 혜택</span>
                    </div>
                    <div class="item_rightbox_point_max">
                        <div>
                            <span>최대 적립 포인트</span>
                            <div>
                                <span id="maxpoint">${(productAR[itemNum].price/100+textpoint+photopoint).toLocaleString()} 원</span>
                                <i class="fa-regular fa-circle-question"></i>
                            </div>
                        </div>
                        <div>
                            <span>└ 기본적립</span> 
                            <div id="basic">${(productAR[itemNum].price/100).toLocaleString()} 원</div>
                        </div>
                    </div>
                    <div class="item_rightbox_point_price_tip">
                        <div>
                            <div>TIP. 포인트 더 받는 방법</div>
                            <div><a href="https://nid.naver.com">최대 5% 적립, 무료 시작</a></div>
                            <div><a href="https://nid.naver.com">네이버 현대카드로 결제 시</a></div>
                            <div><a href="https://nid.naver.com/">네이버페이 머니로 결제 시</a></div>
                        </div>
                        <div>
                            <span>+최대 ${(productAR[itemNum].price*0.09).toLocaleString()}원</span>
                            <span>${(productAR[itemNum].price*0.04).toLocaleString()}원</span>
                            <span>${(productAR[itemNum].price*0.05).toLocaleString()}원</span>
                            <span>${(productAR[itemNum].price*0.02).toLocaleString()}원</span>
                        </div>
                    </div>
                    <div class="item_rightbox_ads"></div>
                    <div class="item_rightbox_point_card">
                        <span>무이자 할부</span>
                        <span>| 카드 자세히보기</span>
                        <i class="fa-regular fa-circle-question"></i>
                    </div>
                    <div id="pointDetails"></div>
                    <div class="item_rightbox_point_transit">
                        <p>택배배송 | 3,000원<span>&#40;주문시 결제&#41; &#183;</span> CJ 대한통운&#40;오네&#41;</p>
                        <p>30,000원 이상 구매 시 무료&#47;제주, 도서 지역 추가 3,000원</p>
                        <p><a href="#">배송비 절약상품 보기</a></p>
                    </div>
                    <div class="item_rightbox_point_quantity">
                        <div style="border: none;">&#45;</div>
                        <input type="text" id="quantity" name="toBuy" value=1 style="text-align: center; "/>
                        <div style="border: none;">&#43;</div>
                    </div>
                    <div class="item_rightbox_point_decision">
                        <div>
                            <div>
                                <span>총 상품 금액</span>
                                <i class="fa-regular fa-circle-question"></i>
                            </div>
                            <div class="item_rightbox_point_decision_total">
                                <span id="totalAmount"></span>
                                <span id="totalPrice"></span>
                            </div>
                        </div>
                        <div>
                            <div class="btn_1">
                                <i class="fa-solid fa-circle-chevron-right"></i>
                                <span>구매하기</span>
                            </div>
                            <div class="btn_2">
                                <i class="fa-regular fa-comment-dots"></i>
                                <span>톡톡문의</span>
                            </div>
                            <div class="btn_3">
                                <i class="fa-solid fa-heart-circle-plus"></i>
                                <span>찜하기</span>
                            </div>
                            <div class="btn_4">
                                <i class="fa-solid fa-bag-shopping"></i>
                                <span>장바구니</span>
                            </div>
                        </div>
                    </div>
                </div>
    `
// 토탈 구하기
let totalAmount = document.getElementById('totalAmount');
let totalPrice = document.getElementById('totalPrice');

totalAmount.innerText =`${quantityBox[0].children[1].value}개`
totalPrice.innerText= `${((quantityBox[0].children[1].value)*productAR[itemNum].price).toLocaleString()}원`
// 수량 박스
quantityBox[0].addEventListener('click', (event)=> {

    if(quantityBox[0].children[1].value>0 && event.target==quantityBox[0].children[0]){
        quantityBox[0].children[1].value-=1;
    }
    if(event.target==quantityBox[0].children[2]){
        quantityBox[0].children[1].value= +quantityBox[0].children[1].value + 1;
    }

    totalAmount.innerText =`${quantityBox[0].children[1].value}개`
    totalPrice.innerText= `${((quantityBox[0].children[1].value)*productAR[itemNum].price).toLocaleString()}원`
});


// 제품 이미지 슬라이드
{
    itemImg[0].innerHTML = `<img src="${productAR[itemNum].img[0]}" alt="${productAR[itemNum].title}">`;
    itemImgBtn[0].addEventListener('click',(event)=>{
        if (event.target.tagName=='IMG'){
            itemImg[0].children[0].src=`${event.target.getAttribute('src')}`;
        }
    })

    for (let i = 0 ; i < productAR[itemNum].img.length; i++){
        itemImgBtn[0].innerHTML +=`<img src="${productAR[itemNum].img[i]}" alt="${productAR[itemNum].title}">`;
    }
}
}
// 베스트 상품
{
    productARSellDown(); 
    for (let i =0 ; i < 4; i++){
    bestitem[0].innerHTML += `<div><img src="${productAR[i].img[0]}" alt="${productAR[i].title}"><p>${productAR[i].title}</p><p>${productAR[i].price.toLocaleString()}</p></div>`;
    }
}
// 제품 이미지 슬라이드
{
    itemImg[0].innerHTML = `<img src="${productAR[itemNum].img[0]}" alt="${productAR[itemNum].title}">`;
    itemImgBtn[0].addEventListener('click',(event)=>{
        if (event.target.tagName=='IMG'){
            itemImg[0].children[0].src=`${event.target.getAttribute('src')}`;
        }
    })

    for (let i = 0 ; i < productAR[itemNum].img.length; i++){
        itemImgBtn[0].innerHTML +=`<img src="${productAR[itemNum].img[i]}" alt="${productAR[itemNum].title}">`;
    }
} 
// 베스트상품 상세페이지로 변경하기
{
    bestitem[0].addEventListener('click', (event) => {
        let eventOj = event.target.closest('div').children[1].innerText;
        console.log(eventOj);
        for(let i=0; i<productAR.length;i++){
            if (eventOj == productAR[i].title) {
                itemNum = i;
                console.log(itemNum)
                break;
            }
        }
        itemBox[0].innerHTML='';
        writePage();
        pageUp();
    }
    )
}
// 포인트 추가 창
{
    //  
    //     {
    //     pointDetails.innerHTML =`<div>
    //     <p>구매적립</p>
    //     <div>
    //     <p>└ 기본적립</p>
    //     <p></p>
        
    //     </div>
    //     </div>
    //     <div>
    //         <p>리뷰적립</p>
    //         <div>
    //             <p>텍스트 리뷰 작성시</p>
    //             <p></p>
    //         </div>
    //         <div>
    //             <p>포토/동영상 리뷰 작성시</p>
    //             <p></p>
    //         </div>
    //     </div>
    //     <div>
    //         <div>
    //             <div>TIP. 포인트 더 받는 방법</div>
    //             <div><a href="https://nid.naver.com">최대 5% 적립, 무료 시작</a></div>
    //             <div><a href="https://nid.naver.com">네이버 현대카드로 결제 시</a></div>
    //             <div><a href="https://nid.naver.com/">네이버페이 머니로 결제 시</a></div>
    //         </div>
    //         <div>
    //             <span>최대 2,205원</span>
    //             <span>980원</span>
    //             <span>1,225원</span>
    //             <span>490원</span>
    //         </div>
    //     </div>
    //     <hr>
    //     <ul>
    //         <li>네이버 페이 포인트는 <span id="a">구매확정 시 적립</span> 됩니다.</li>
    //         <li>적립 포인트는 할인 쿠폰 적용 및 옵션 가격을 기준으로 적립되므로, 최종 적립 포인트는 <span id="a">쿠폰 사용 여부</span> 및 <span id="a">옵션 가격</span>에 따라 달라질 수 있습니다.</li>
    //         <li><span id="a">1회 주문시 구매적립은 최대 100,000원까지 적립</span> 가능합니다. (단, 무통장입금은 최대2만원까지 적립)
    //             <p color: "gray">(네이버플러스 멤버십 적립 혜택은 예외)</p></li>
    //         <li>단, <span id="a">추가적립(추가구매적립 및 재구매/등급 적립)은 일반 구매 적립 한도(최대 100,000원)와 별개로 1회 주문 기준 최대 200,000원까지 적립</span> 가능합니다. (무통장입금 또한 별개로 최대 2만원까지 적립)</li>
    //         <li>구매확정 이후 90일까지 리뷰를 최대 2번 작성할 수 있습니다. 구매확정 이후 30일까지 리뷰를 작성할 수 있고, 구매확정 이후 31일부터는 한달사용 리뷰를 작성할 수 있습니다.</li>
    //         <li>알림받기 동의 고객 리뷰 포인트는 주문 시 알림받기 동의중인 고객님께만 지급되며 리뷰 혹은 한달사용 리뷰 작성 시 1회만 지급됩니다.</li>
    //         <li>상품결제금액 기준 구매금액 3,000원 미만인 경우 작성에 대한 포인트가 <span id="a">최대 150원 적립 제외됩니다.</span></li>
    //         <li>상품주문결제 금액에서 구매혜택과 리뷰작성 적립포인트를 차감한 금액이 0원 미만일 경우 구매혜택 및 리뷰작성에 대한 포인트 적립이 제외됩니다.</li>
    //         <li>구매확정 후 30일 이내 상품 리뷰를 작성하지 않고 한달사용리뷰만 작성했을 경우, 한달사용리뷰 포인트 대신 구매확정 30일 이내 리뷰 작성 시 지급되는 포인트로 대체 지급됩니다.</li>
    //         <li>네이버플러스 멤버십 적립 혜택은 200,000원까지는 4% 적립, 200,000원 초과 3,000,000원까지는 1%로 적립되며, <span id="a">주문 상품당 최대 20,000원까지 적립</span>됩니다.</li>
    //         <li>네이버플러스 멤버십 이벤트 진행 중에는 추가 적립 혜택이 제공될 수 있으며, 자세한 적립 정책은 멤버십 이벤트 페이지와 <a link="#" alt="custumerCenter">고객센터</a>에서 확인 가능합니다.</li>
    //     </ul>
    //     `
    // }
    // }

    
}

// let warning = document.getElementsByClassName("warning");
//     warning[0].innerHTML =
//     ``